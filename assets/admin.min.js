!function(a,b,c){a(document).ready(function(){function d(b,d){a.ajax({url:c.api_root+"wpeci/customers/"+b,method:"GET",beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",c.api_nonce)},dataType:"json",success:function(a){d(a)}})}function e(a,d){b.ajax.post("wpeci_make_"+a+"_id",{nonce:c.ajax_nonce}).done(function(a){d(a)}).fail(function(a){})}function f(d){var e=a("#first_name").val(),f=a("#last_name").val(),g="";a("#title").val()&&a("#title").val()!==a("#title-prompt-text").text()&&(g=a("#title").val()),e&&f&&b.ajax.post("wpeci_make_customer_id",{nonce:c.ajax_nonce,first_name:e,last_name:f,old_id:g}).done(function(a){d(a)}).fail(function(a){})}function g(){var b=i.val();return b&&0!==b&&"0"!==b?void d(b,function(b){c.currency!==b.country.currency?a("#currency_factor").parents("tr").show():a("#currency_factor").parents("tr").hide()}):void a("#currency_factor").parents("tr").hide()}function h(){var b=j.val();"paypal"===b?a("#paypal_fee_amount").parents("tr").show():a("#paypal_fee_amount").parents("tr").hide(),"deposit"===b?a("#deposit_fee_amount").parents("tr").show():a("#deposit_fee_amount").parents("tr").hide()}"eci_invoice"===a("#post_type").val()?(a("#title").prop("readonly",!0),a("#title").val()||e("invoice",function(b){a("#title").val(b),a("#title-prompt-text").addClass("screen-reader-text")})):"eci_estimate"===a("#post_type").val()&&(a("#title").prop("readonly",!0),a("#title").val()||e("estimate",function(b){a("#title").val(b),a("#title-prompt-text").addClass("screen-reader-text")})),"eci_customer"===a("#post_type").val()&&(a("#title").prop("readonly",!0),a("#first_name").on("change",function(){f(function(b){a("#title").val(b),a("#title-prompt-text").addClass("screen-reader-text")})}),a("#last_name").on("change",function(){f(function(b){a("#title").val(b),a("#title-prompt-text").addClass("screen-reader-text")})}));var i=a("select#customer");0<i.length&&0<a("#currency_factor").length&&(g(),i.on("change",g));var j=a("select#payment_method");0<j.length&&(h(),j.on("change",h)),a(document).on("change","#contents .wpdlib-input-select",function(b){var c=a(this),d=c.val(),e="";c.children("option").each(function(){a(this).val()===d&&(e=a(this).text())});var f=e.match(/\(([0-9\.,]+)/);if(f&&f.length&&f[1]){var g=parseFloat(f[1]);a("#"+c.attr("id").replace("-effort","-amount")).val(g)}})})}(jQuery,wp,wpeci_settings);